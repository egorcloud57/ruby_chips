h1 = {"X"=>2, "Y"=>1, "Z"=>1}
h2 = {"X"=>1, "Y"=>1}

p h1.merge(h2) { |k, v1, v2| v1 - v2 }